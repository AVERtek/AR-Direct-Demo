<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sugarlump Amazon Book with Animation Controls</title>
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background-color: #f0f0f0;
            position: relative; /* For absolute positioning of controls */
            overflow: hidden; /* Prevent scrollbars if model-viewer is full height */
        }
        model-viewer {
            width: 100%;
            height: 100vh; /* Occupy full viewport height */
            background-color: #ffffff;
            /* No border-radius or box-shadow for a seamless look */
        }

        /* Container for the main controls (Play/Pause, Go to Book) */
        .main-controls-container {
            position: absolute;
            bottom: 20px; /* Adjust as needed */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 15px; /* Space between buttons */
            z-index: 10; /* Ensure buttons are above model-viewer */
        }

        /* Styling for all buttons */
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        /* Specific styles for each button type */
        .ar-button {
            background-color: #007bff;
            color: white;
            /* Positioned directly by model-viewer's slot, but keeping style */
        }
        .ar-button:hover {
            background-color: #0056b3;
        }

        .play-pause-button {
            background-color: #6f42c1; /* Purple */
            color: white;
        }
        .play-pause-button:hover {
            background-color: #5a2e9b;
        }

        .url-button {
            background-color: #28a745; /* Green */
            color: white;
        }
        .url-button:hover {
            background-color: #218838;
        }

        /* Style for the audio play button, positioned separately */
        #play-audio-standalone {
            position: absolute;
            top: 20px; /* Position it at the top-left */
            left: 20px;
            background-color: #ffc107; /* Yellow for audio */
            color: #333;
            z-index: 10;
        }
        #play-audio-standalone:hover {
            background-color: #e0a800;
        }

        /* Hide the URL button initially as per your original logic */
        #url-button {
            display: none;
        }
    </style>
</head>
<body>
    <model-viewer
        id="myModelViewer"
        src="Models/kindness_rocks_large_7.glb"
        ios-src="KINDNESS_ROCKS_LARGE_7_Output.usdz"
        alt="A 3D model"
        ar
        ar-modes="scene-viewer webxr quick-look"
        camera-controls
        poster="images/rocks.png"
        shadow-intensity="1"
        ar-scale="auto"
        ar-placement="floor"
        interaction-prompt="none"
        animation-name="Wave" autoplay="false" >
        <button slot="ar-button" id="ar-button" class="ar-button">View in your space</button>
    </model-viewer>

    <audio id="audio" src="Sound/Kindness Rocks_mix.mp3" loop></audio>
    <button id="play-audio-standalone">Play Audio</button>

    <div class="main-controls-container">
        <button id="playPauseButton" class="play-pause-button">Play Animation</button>
        <button id="url-button" class="url-button">Go to Book</button>
    </div>

    <script>
        const modelViewer = document.getElementById('myModelViewer');
        const playPauseButton = document.getElementById('playPauseButton');
        const urlButton = document.getElementById('url-button');
        const audio = document.getElementById('audio');
        const playAudioStandaloneButton = document.getElementById('play-audio-standalone');

        // --- Model-Viewer Animation Control ---
        // We'll manage the animation state entirely with this button.
        // The model-viewer starts paused since auto-rotate/autoplay are removed.
        let isAnimationPlaying = false; // Initialize to false as we're no longer auto-playing

        // Set initial button text to "Play Animation"
        playPauseButton.textContent = 'Play Animation';

        playPauseButton.addEventListener('click', () => {
            if (isAnimationPlaying) {
                modelViewer.pause();
                playPauseButton.textContent = 'Play Animation';
            } else {
                // Ensure there's an animation to play. If not, this will do nothing.
                // You might want to check modelViewer.availableAnimations if your model
                // doesn't always have one, or if you want to explicitly start a default.
                modelViewer.play();
                playPauseButton.textContent = 'Pause Animation';
            }
            isAnimationPlaying = !isAnimationPlaying;
        });

        // Listen to model-viewer's internal play/pause events
        // to keep our button in sync, useful if other scripts control it.
        modelViewer.addEventListener('play', () => {
            isAnimationPlaying = true;
            playPauseButton.textContent = 'Pause Animation';
        });

        modelViewer.addEventListener('pause', () => {
            isAnimationPlaying = false;
            playPauseButton.textContent = 'Play Animation';
        });

        // --- AR Status and URL Button Visibility ---
        modelViewer.addEventListener('ar-status', (event) => {
            if (event.detail.status === 'session-started') {
                urlButton.style.display = 'block';
            } else {
                urlButton.style.display = 'none';
            }
        });

        // --- URL Button Logic ---
        urlButton.addEventListener('click', () => {
            const amazonUrl = "https://www.amazon.com/Sweet-Dreams-Sugarlump-childrens-everywhere/dp/B0FFZD7D12/ref=sr_1_1?crid=2PE5ZR31RUKFJ&dib=eyJ2IjoiMSJ9.eirXTPVo6volOV0M2LSzWYM7M7OETpDHtuB5kCsvMqZpHjvNE3fvrGYiQzi9OEE_KnGVoDwiK8TJUKsihTlWlEkYrzfe4QfSs8rE6vaoo0Y5BfWqKzpuFPGm7bKE9IC-Kz-0FvP462KBgxOa04D1aqfLppMInjk90QDppqNon6eTrQ0InDpeNmty3hB14QayZjes0oEcHGgvSH_4mtoM9SHyIbK9wzspljEyRdN_vAiF9SAFTutLx3FZqHy8JM44s5QDZ0XdYakBff_dMR3KMvFf10ZCsMFhMmGz6QY5jPI.EkEaYpKKTbUyJ3uJZG_vjHaGCtcX2MSHyN27dyNdIqY&dib_tag=se&keywords=sugarlump&qid=1752536576&sprefix=sugarlump%2Caps%2C158&sr=8-1'";
            window.open(amazonUrl, '_blank'); // Opens in a new tab
        });

        // --- Audio Play Button Logic ---
        playAudioStandaloneButton.addEventListener('click', () => {
            audio.play();
            // Optionally, change text or disable after first play
            playAudioStandaloneButton.textContent = 'Playing Audio';
            playAudioStandaloneButton.disabled = true;
        });
    </script>
</body>
</html>



<!--<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>sugarlump Amazon Book</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <script nomodule src="https://unpkg.com/@google/model-viewer/dist/model-viewer-legacy.js"></script>
  <style>
    #ar-button {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    #url-button {
      display: none;
      position: absolute;
      bottom: 60px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <model-viewer 
    src="Models/kindness_rocks_large_7.glb?sound=Sound/Kindness Rocks_mix.mp3" 
    ios-src="KINDNESS_ROCKS_LARGE_7_Output.usdz"
    alt="A 3D model" 
    ar 
    ar-modes="scene-viewer webxr quick-look" 
    camera-controls 
    auto-rotate 
    autoplay 
    poster="images/rocks.png" 
    shadow-intensity="1" 
    ar-scale="auto" 
    ar-placement="floor"
    interaction-prompt="none">
    <button slot="ar-button" id="ar-button">View in your space</button>
  </model-viewer>

  <audio id="audio" src="Sound/Kindness Rocks_mix.mp3" loop></audio>
  <button id="play-audio" onclick="document.getElementById('audio').play()">Play Audio</button>

  <button id="url-button" onclick="window.location.href='https://www.amazon.com/Sweet-Dreams-Sugarlump-childrens-everywhere/dp/B0FFZD7D12/ref=sr_1_1?crid=2PE5ZR31RUKFJ&dib=eyJ2IjoiMSJ9.eirXTPVo6volOV0M2LSzWYM7M7OETpDHtuB5kCsvMqZpHjvNE3fvrGYiQzi9OEE_KnGVoDwiK8TJUKsihTlWlEkYrzfe4QfSs8rE6vaoo0Y5BfWqKzpuFPGm7bKE9IC-Kz-0FvP462KBgxOa04D1aqfLppMInjk90QDppqNon6eTrQ0InDpeNmty3hB14QayZjes0oEcHGgvSH_4mtoM9SHyIbK9wzspljEyRdN_vAiF9SAFTutLx3FZqHy8JM44s5QDZ0XdYakBff_dMR3KMvFf10ZCsMFhMmGz6QY5jPI.EkEaYpKKTbUyJ3uJZG_vjHaGCtcX2MSHyN27dyNdIqY&dib_tag=se&keywords=sugarlump&qid=1752536576&sprefix=sugarlump%2Caps%2C158&sr=8-1'">Go to Book</button>

  <script>
    const modelViewer = document.querySelector('model-viewer');
    modelViewer.addEventListener('ar-status', (event) => {
      if (event.detail.status === 'session-started') {
        document.getElementById('url-button').style.display = 'block';
      } else {
        document.getElementById('url-button').style.display = 'none';
      }
    });
  </script>
</body>
</html> -->
